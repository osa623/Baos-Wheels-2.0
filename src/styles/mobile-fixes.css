/* Mobile Menu Fixes */
@media (max-width: 768px) {
  body.menu-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
  }
  
  #mobile-menu {
    z-index: 90 !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    height: 100vh !important;
    width: 100vw !important;
    transform-origin: right center;
    pointer-events: auto !important; /* Ensure touch events work */
  }

  /* Ensure close button is above other content */
  #mobile-menu .sticky {
    z-index: 91 !important;
  }
  
  /* Fix for iOS devices */
  .translate-x-0 {
    transform: translateX(0) !important;
    visibility: visible !important;
    pointer-events: auto !important;
  }
  
  .translate-x-full {
    transform: translateX(100%) !important;
    visibility: hidden !important; /* Hide when fully translated out */
    transition: transform 0.3s ease-in-out, visibility 0.3s ease-in-out !important;
  }

  /* Ensure close button is always clickable */
  button[aria-label="Close menu"] {
    z-index: 100 !important;
    pointer-events: auto !important;
    position: relative !important;
  }

  /* Fix stacking context */
  .header-menu-button {
    z-index: 95 !important;
    position: relative !important;
  }
}

/* Fix for z-index conflicts */
.header-layer {
  isolation: isolate;
}

/* Overflow control for mobile menu */
.mobile-menu-open {
  overflow: hidden !important;
}

/* Animation reset for iOS */
@supports (-webkit-touch-callout: none) {
  #mobile-menu {
    transition-property: transform, opacity !important;
    will-change: transform !important;
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
  }
}
